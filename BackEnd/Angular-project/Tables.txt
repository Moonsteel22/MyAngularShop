-- Table: public.app_phone

-- DROP TABLE public.app_phone;

CREATE TABLE public.app_phone
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    producer character varying(25) COLLATE pg_catalog."default" NOT NULL,
    name character varying(30) COLLATE pg_catalog."default" NOT NULL,
    description character varying(100) COLLATE pg_catalog."default" NOT NULL,
    ram character varying(7) COLLATE pg_catalog."default" NOT NULL,
    memory character varying(7) COLLATE pg_catalog."default" NOT NULL,
    display character varying(10) COLLATE pg_catalog."default" NOT NULL,
    gpu character varying(20) COLLATE pg_catalog."default" NOT NULL,
    cpu character varying(20) COLLATE pg_catalog."default" NOT NULL,
    weight character varying(7) COLLATE pg_catalog."default" NOT NULL,
    recieveddate timestamp(0) with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP,
    amount integer NOT NULL,
    imgurl character varying(40) COLLATE pg_catalog."default",
    price integer DEFAULT 0,
    CONSTRAINT phones_table_pkey PRIMARY KEY (id),
    CONSTRAINT app_phone_price_check CHECK (price > '-1'::integer)
)

TABLESPACE pg_default;

ALTER TABLE public.app_phone
    OWNER to postgres;



-- Table: public.user_table

-- DROP TABLE public.user_table;

CREATE TABLE public.user_table
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    name character varying(20) COLLATE pg_catalog."default" NOT NULL,
    surname character varying(20) COLLATE pg_catalog."default" NOT NULL,
    login character varying(20) COLLATE pg_catalog."default" NOT NULL,
    password character varying(12) COLLATE pg_catalog."default" NOT NULL,
    email character varying(40) COLLATE pg_catalog."default" NOT NULL,
    phone character varying(16) COLLATE pg_catalog."default",
    age smallint NOT NULL,
    imgurl character varying(40) COLLATE pg_catalog."default",
    role character varying(2) COLLATE pg_catalog."default" DEFAULT 'U'::character varying,
    registrationdate timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT user_table_pkey PRIMARY KEY (id),
    CONSTRAINT user_table_age_check CHECK (age > 0)
)

TABLESPACE pg_default;

ALTER TABLE public.user_table
    OWNER to postgres;








-- Table: public.cart

-- DROP TABLE public.cart;

CREATE TABLE public.cart
(
    userid integer NOT NULL,
    phoneid integer NOT NULL,
    amount integer NOT NULL,
    CONSTRAINT cart_pkey PRIMARY KEY (userid, phoneid),
    CONSTRAINT cart_phoneid_fkey FOREIGN KEY (phoneid)
        REFERENCES public.app_phone (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT cart_userid_fkey FOREIGN KEY (userid)
        REFERENCES public.user_table (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT cart_amount_check CHECK (amount > 0)
)

TABLESPACE pg_default;

ALTER TABLE public.cart
    OWNER to postgres;